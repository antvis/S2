name: ğŸ‰ Release Notify

on:
  release:
    # published: latest release å’Œ pre release éƒ½ä¼šè§¦å‘
    # prereleased: åªæœ‰ pre release è§¦å‘
    # released: åªæœ‰ latest release è§¦å‘
    types: [prereleased]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Pre Release Notify
        uses: zcong1993/actions-ding@master
        with:
          dingToken: ${{ secrets.DING_TALK_ACCESS_TOKEN }}
          ignoreError: true
          body: |
            {
              "msgtype": "link",
              "link": {
                "title": "ğŸ‰ AntV/S2 æµ‹è¯•ç‰ˆæœ¬å‘å¸ƒå•¦ (${{ github.head_ref || github.ref_name }}) ğŸ‰",
                "text": "ğŸ“‹ æµ‹è¯•ç‰ˆæœ¬è¯·è°¨æ…ä½¿ç”¨, ç‚¹å‡»æŸ¥çœ‹æ›´æ–°æ—¥å¿—",
                "messageUrl": "https://github.com/antvis/S2/releases",
                "picUrl": "https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*1PTTQLk3j5AAAAAAAAAAAAAADmJ7AQ/original"
              }
            }

      - name: Pre Release Notify
        uses: zcong1993/actions-ding@master
        with:
          dingToken: ${{ secrets.DING_TALK_GROUP_TOKEN }}
          ignoreError: true
          body: |
            {
              "msgtype": "link",
              "link": {
                "title": "ğŸ‰ AntV/S2 æµ‹è¯•ç‰ˆæœ¬å‘å¸ƒå•¦ ğŸ‰",
                "text": "ğŸ“‹ æµ‹è¯•ç‰ˆæœ¬è¯·è°¨æ…ä½¿ç”¨, ç‚¹å‡»æŸ¥çœ‹æ›´æ–°æ—¥å¿—",
                "messageUrl": "https://github.com/antvis/S2/releases",
                "picUrl": "https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*1PTTQLk3j5AAAAAAAAAAAAAADmJ7AQ/original"
              }
            }

      - name: Pre Release Notify
        uses: zcong1993/actions-ding@master
        with:
          dingToken: ${{ secrets.DING_TALK_PUBLIC_TOKEN }}
          ignoreError: true
          body: |
            {
              "msgtype": "link",
              "link": {
                "title": "ğŸ‰ AntV/S2 æµ‹è¯•ç‰ˆæœ¬å‘å¸ƒå•¦ ğŸ‰",
                "text": "ğŸ“‹ æµ‹è¯•ç‰ˆæœ¬è¯·è°¨æ…ä½¿ç”¨, ç‚¹å‡»æŸ¥çœ‹æ›´æ–°æ—¥å¿—",
                "messageUrl": "https://github.com/antvis/S2/releases",
                "picUrl": "https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*1PTTQLk3j5AAAAAAAAAAAAAADmJ7AQ/original"
              }
            }

