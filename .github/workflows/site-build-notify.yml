name: 🚀 Site Build Notify
on:
  page_build

jobs:
  site-build-notify:
    runs-on: ubuntu-latest

    steps:
      - name: Old Site Build Success Notify
        uses: zcong1993/actions-ding@master
        with:
          dingToken: ${{ secrets.DING_TALK_ACCESS_TOKEN }}
          ignoreError: true
          body: |
            {
              "msgtype": "link",
              "link": {
                "title": "✅ 旧官网(https://s2.antv.vision) 部署成功",
                "text": "点击访问 https://s2.antv.vision/",
                "messageUrl": "https://s2.antv.vision/",
                "picUrl": "https://gw.alipayobjects.com/zos/antfincdn/JxgObjrPo/dde3c2cf-ce2f-45ab-90a7-9f5cce889227.png"
              }
            }

      - name: New Site Build Notify
        uses: zcong1993/actions-ding@master
        with:
          dingToken: ${{ secrets.DING_TALK_ACCESS_TOKEN }}
          ignoreError: true
          body: |
            {
              "msgtype": "link",
              "link": {
                "title": "📢 请发布值班手动部署新官网 (https://s2.antv.antgroup.com) 📢",
                "text": "点击查看部署教程",
                "messageUrl": "https://yuque.antfin-inc.com/spreadsheet/garqs6/hednl5#RfuD9",
                "picUrl": "https://gw.alipayobjects.com/zos/antfincdn/JxgObjrPo/dde3c2cf-ce2f-45ab-90a7-9f5cce889227.png"
              }
            }
